<% doc_presenter = index_presenter(document) %>
<% is_collection = doc_presenter.field_value('has_model_ssim') == 'Collection'%>

<div class="col-md-<%= is_collection ? 7 : 10 %>">
  <div class="metadata">
    <dl class="dl-horizontal">
    <% index_fields(document).each do |field_name, field| -%>
      <% if should_render_index_field? document, field %>
          <dt><%= render_index_field_label document, field: field_name %></dt>
          <dd><%= doc_presenter.field_value field_name %></dd>
      <% end %>
    <% end %>
    </dl>
  </div>
</div>
<% if(is_collection) %>
  <% collection_presenter = Hyrax::CollectionPresenter.new(document, current_ability) %>
  <div class="col-md-3">
    <div class="collection-counts-wrapper">
      <div class="collection-counts-item">
        <span><%= collection_presenter.total_viewable_collections %></span>Collections
      </div>
      <div class="collection-counts-item">
        <span><%= collection_presenter.total_viewable_works %></span>Works
      </div>
    </div>
  </div>
<% end %>
